# 1测试概述

## 1.1测试范围

## 1.2测试人员及对应分工

| **测试名称** | **测试人员** |
| ------------------ | ------------------ |
| 进程执行测试       | 时睿岐             |
| 进程调度测试       | 梁荻宇             |
| 内存管理测试       |                    |
| 设备管理测试       |                    |
| 文件管理测试       |                    |
| 交互界面测试       |                    |
| 进程访存执行测试   |                    |
| 进程设备中断测试   |                    |
| 进程文件执行测试   | 时睿岐             |
| 系统系统测试       | 全体成员           |

## 1.3测试目标（各模块的功能、性能、兼容等）

进程调度应该实现多个进程能保证有序的切换并保证最多同时执行两个进程，不会因为进程切换而死锁或程序异常退出。

## 1.4测试环境

- **操作系统**

Windows 10, 64位

- **内存**

16G

- **磁盘空间**

支持100MB以上磁盘空间。

在本地文件系统留有相应的镜像文件系统。

- **编译环境**

**Qt**** 编译器**：Qt 5.14.2 开源版

**C++**** 编译器**：X86-windows-MSVC2022-pe-64bit

（需支持C++17以上版本）

- **集成开发环境（**** IDE ****）**

Qt Creator 7.0.1社区版

- **依赖外部库**

Qt core gui

### 1.4.1软件体系结构框图

### 1.4.2软件主要模块及其依赖关系说明

## 1.5软件数据结构设计

### 1.5.1全局数据结构说明

### 1.5.2数据结构与系统单元的关系

说明各个数据结构与访问这些数据结构的各个模块级产品组件的分配之间的对应关系，可采用如下的矩阵图的形式：

| ...    | **进程模块** | **中断模块** | **文件模块** | **内存模块** | **设备模块** |
| ------ | ------------------ | ------------------ | ------------------ | ------------------ | ------------------ |
| PCB    | √                 |                    |                    |                    |                    |
| 进程类 | √                 |                    |                    |                    |                    |

## 1.6软件接口设计

(1)操作界面（命令接口）

用户使用这个界面组织工作流程和控制程序的运行。

（2）系统功能服务界面（程序接口）

用户程序在其运行过程中，使用系统调用功能来请求操作系统的服务。

### 1.6.1外部接口

键盘，输入数据保存文件。

屏幕显示，显示程序图形界面关系

### 1.6.2内部接口

输入文件名称和文件内容，点击保存文件，并显示文件存储路径及文件名称，文件内容。

# 2测试过程评估

## 2.1测试总体评估

## 2.2测试用例设计

### 2.2.1进程管理模块测试

进程能够实现正常的时间片轮转切出，就绪调入，设备中断退出，写入文件和查看文件。

### 2.2.2内存管理模块测试

### 2.2.3文件管理模块测试

### 2.2.4设备管理模块测试

### 2.2.5用户界面模块测试

### 2.2.6系统测试

- **功能描述**

针对整个系统，根据验收要求进行测试，要求完成测试如下功能：

| 进程管理 | 状态管理、进程创建（new）、进程调度（scheduling）、进程阻塞（block）、进程唤醒（wakeup）。                      |
| -------- | --------------------------------------------------------------------------------------------------------------- |
| 内存管理 | 进程存储空间的分配和回收，实现页式内存管理方式、实现请求调页内存管理方式。                                      |
| 文件管理 | 实现文件逻辑结构、文件物理结构、实现文件目录内容、目录/文件的创建、目录/文件的删除、目录/文件的空间分配和回收。 |
| 设备管理 | 设备表、设备状态、设备队列的实现，实现设备的申请、分配、使用和释放。                                            |
| UI界面   | 通过图像界面展示多道程序并发执行过程，通过shell命令行与用户进行交互。                                           |
| 时钟管理 | 完成系统时序的控制，完成当前时间的计时功能。                                                                    |
| 中断机制 | 模拟实现中断机制，通过中断响应机制来实现进程从等待到就绪状态的变化。                                            |

- **测试方法**

根据系统测试要求，模拟用户访问的方式，通过与shell交互执行用户命令来验证系统的各种功能的实现，并且通过图形界面展示的方式来观察系统的执行状态。

- **测试用例描述**

1. 使用"cd"系统命令跳转到文件夹file。
2. 使用"mkdir"系统命令创建一个文件夹test3。
3. 使用"mkfile"系统命令在test3目录下创建两个文件test4、test5。
4. 使用"rm"系统命令在test3目录下删除文件test4。
5. 使用"rmdir"系统命令删除test3目录。
6. 使用"ls"系统命令展示当前文件夹下文件系统情况。
7. 使用"ls -l"系统命令展示当前文件夹下文件系统详细情况。
8. 使用"fork"系统命令执行程序thread1、thread2、thread3，期间通过系统输出相关信息来确认进程的工作情况和切换状态。

- **期望结果**

1. 系统正常执行，不会发生崩溃和故障。
2. 文件创建与删除过程中，通过图形界面能够观察到对应的磁盘资源的占用和释放。
3. 文件系统展示正常。
4. 程序执行过程符合预期，各种调度情况正常。

## 2.3测试用例执行情况

### 2.3.1进程管理模块测试

### 2.3.2内存管理模块测试

### 2.3.3文件管理模块测试

### 2.3.4设备管理模块测试

### 2.3.5用户界面模块测试

### 2.3.6集成测试

### 2.3.7系统测试

## 2.4测试用例执行情况分析

## 2.5缺陷统计

多进程抢占文件时会出现异常终止程序。

## 2.6缺陷分析

进程文件释放的中断程序处理慢于另一进程的的申请，调度没有机制让进入文件抢占而中断进入等待队列的进程唤醒的机制，而在调度算法中出现死循环。

## 2.7改进与未解决问题

多进程抢占文件的问题：补充一个进程释放文件的中断信号，经中断处理后让调度再根据等待队列最前一个申请设备的进程唤醒即可。

进程异步终止问题：使用函数更丰富的C++线程库。

进程后台运行问题：将整个调度程序修改进一个单独的进程中模拟，增设管道来通信。

# 3软件测试总结

## 3.1软件测试总结

## 3.2改进和建议

线程部分如上所述，多进程增加一个中断唤醒机制，使用更丰富的C++线程库以及将进程调度模块转移至一个单独的进程中运行。

# 4附录
